{"ast":null,"code":"import{createPortal}from'react-dom';import{useState,useEffect}from'react';import{Dialog,DialogContent,DialogTitle,TableContainer,Table,TableHead,TableRow,TableCell,TableBody,Paper}from'@mui/material';import moment from'moment';import axios from'axios';import{baseURL}from'store/constant';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const AboutDialog=_ref=>{let{show,onCancel}=_ref;const portalElement=document.getElementById('portal');const[data,setData]=useState({});useEffect(()=>{if(show){const username=localStorage.getItem('username');const password=localStorage.getItem('password');const config={};if(username&&password){config.auth={username,password};}const latestReleaseReq=axios.get('https://api.github.com/repos/FlowiseAI/Flowise/releases/latest');const currentVersionReq=axios.get(\"\".concat(baseURL,\"/api/v1/version\"),{...config});Promise.all([latestReleaseReq,currentVersionReq]).then(_ref2=>{let[latestReleaseData,currentVersionData]=_ref2;const finalData={...latestReleaseData.data,currentVersion:currentVersionData.data.version};setData(finalData);}).catch(error=>{console.error('Error fetching data:',error);});}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[show]);const component=show?/*#__PURE__*/_jsxs(Dialog,{onClose:onCancel,open:show,fullWidth:true,maxWidth:\"sm\",\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\",children:[/*#__PURE__*/_jsx(DialogTitle,{sx:{fontSize:'1rem'},id:\"alert-dialog-title\",children:\"Flowise Version\"}),/*#__PURE__*/_jsx(DialogContent,{children:data&&/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{\"aria-label\":\"simple table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Current Version\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Latest Version\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Published At\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:/*#__PURE__*/_jsxs(TableRow,{sx:{'&:last-child td, &:last-child th':{border:0}},children:[/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",children:data.currentVersion}),/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",children:/*#__PURE__*/_jsx(\"a\",{target:\"_blank\",rel:\"noreferrer\",href:data.html_url,children:data.name})}),/*#__PURE__*/_jsx(TableCell,{children:moment(data.published_at).fromNow()})]})})]})})})]}):null;return/*#__PURE__*/createPortal(component,portalElement);};export default AboutDialog;","map":{"version":3,"names":["createPortal","useState","useEffect","Dialog","DialogContent","DialogTitle","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","Paper","moment","axios","baseURL","jsx","_jsx","jsxs","_jsxs","AboutDialog","_ref","show","onCancel","portalElement","document","getElementById","data","setData","username","localStorage","getItem","password","config","auth","latestReleaseReq","get","currentVersionReq","concat","Promise","all","then","_ref2","latestReleaseData","currentVersionData","finalData","currentVersion","version","catch","error","console","component","onClose","open","fullWidth","maxWidth","children","sx","fontSize","id","border","scope","target","rel","href","html_url","name","published_at","fromNow"],"sources":["D:/Flowise/packages/ui/src/ui-component/dialog/AboutDialog.js"],"sourcesContent":["import { createPortal } from 'react-dom'\r\nimport { useState, useEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Dialog, DialogContent, DialogTitle, TableContainer, Table, TableHead, TableRow, TableCell, TableBody, Paper } from '@mui/material'\r\nimport moment from 'moment'\r\nimport axios from 'axios'\r\nimport { baseURL } from 'store/constant'\r\n\r\nconst AboutDialog = ({ show, onCancel }) => {\r\n    const portalElement = document.getElementById('portal')\r\n\r\n    const [data, setData] = useState({})\r\n\r\n    useEffect(() => {\r\n        if (show) {\r\n            const username = localStorage.getItem('username')\r\n            const password = localStorage.getItem('password')\r\n\r\n            const config = {}\r\n            if (username && password) {\r\n                config.auth = {\r\n                    username,\r\n                    password\r\n                }\r\n            }\r\n            const latestReleaseReq = axios.get('https://api.github.com/repos/FlowiseAI/Flowise/releases/latest')\r\n            const currentVersionReq = axios.get(`${baseURL}/api/v1/version`, { ...config })\r\n\r\n            Promise.all([latestReleaseReq, currentVersionReq])\r\n                .then(([latestReleaseData, currentVersionData]) => {\r\n                    const finalData = {\r\n                        ...latestReleaseData.data,\r\n                        currentVersion: currentVersionData.data.version\r\n                    }\r\n                    setData(finalData)\r\n                })\r\n                .catch((error) => {\r\n                    console.error('Error fetching data:', error)\r\n                })\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [show])\r\n\r\n    const component = show ? (\r\n        <Dialog\r\n            onClose={onCancel}\r\n            open={show}\r\n            fullWidth\r\n            maxWidth='sm'\r\n            aria-labelledby='alert-dialog-title'\r\n            aria-describedby='alert-dialog-description'\r\n        >\r\n            <DialogTitle sx={{ fontSize: '1rem' }} id='alert-dialog-title'>\r\n                Flowise Version\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                {data && (\r\n                    <TableContainer component={Paper}>\r\n                        <Table aria-label='simple table'>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell>Current Version</TableCell>\r\n                                    <TableCell>Latest Version</TableCell>\r\n                                    <TableCell>Published At</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                <TableRow sx={{ '&:last-child td, &:last-child th': { border: 0 } }}>\r\n                                    <TableCell component='th' scope='row'>\r\n                                        {data.currentVersion}\r\n                                    </TableCell>\r\n                                    <TableCell component='th' scope='row'>\r\n                                        <a target='_blank' rel='noreferrer' href={data.html_url}>\r\n                                            {data.name}\r\n                                        </a>\r\n                                    </TableCell>\r\n                                    <TableCell>{moment(data.published_at).fromNow()}</TableCell>\r\n                                </TableRow>\r\n                            </TableBody>\r\n                        </Table>\r\n                    </TableContainer>\r\n                )}\r\n            </DialogContent>\r\n        </Dialog>\r\n    ) : null\r\n\r\n    return createPortal(component, portalElement)\r\n}\r\n\r\nAboutDialog.propTypes = {\r\n    show: PropTypes.bool,\r\n    onCancel: PropTypes.func\r\n}\r\n\r\nexport default AboutDialog\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}