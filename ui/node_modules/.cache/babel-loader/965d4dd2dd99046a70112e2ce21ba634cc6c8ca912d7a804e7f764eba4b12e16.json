{"ast":null,"code":"import{useEffect,useState}from'react';import{useSelector}from'react-redux';// material-ui\nimport{Grid,Box,Stack,Button}from'@mui/material';import{useTheme}from'@mui/material/styles';// project imports\nimport MainCard from'ui-component/cards/MainCard';import ItemCard from'ui-component/cards/ItemCard';import{gridSpacing}from'store/constant';import ToolEmptySVG from'assets/images/tools_empty.svg';import{StyledButton}from'ui-component/button/StyledButton';import AssistantDialog from'./AssistantDialog';import LoadAssistantDialog from'./LoadAssistantDialog';// API\nimport assistantsApi from'api/assistants';// Hooks\nimport useApi from'hooks/useApi';// icons\nimport{IconPlus,IconFileImport}from'@tabler/icons';// ==============================|| CHATFLOWS ||============================== //\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Assistants=()=>{const theme=useTheme();const customization=useSelector(state=>state.customization);const getAllAssistantsApi=useApi(assistantsApi.getAllAssistants);const[showDialog,setShowDialog]=useState(false);const[dialogProps,setDialogProps]=useState({});const[showLoadDialog,setShowLoadDialog]=useState(false);const[loadDialogProps,setLoadDialogProps]=useState({});const loadExisting=()=>{const dialogProp={title:'Load Existing Assistant'};setLoadDialogProps(dialogProp);setShowLoadDialog(true);};const onAssistantSelected=(selectedOpenAIAssistantId,credential)=>{setShowLoadDialog(false);addNew(selectedOpenAIAssistantId,credential);};const addNew=(selectedOpenAIAssistantId,credential)=>{const dialogProp={title:'Add New Assistant',type:'ADD',cancelButtonName:'Cancel',confirmButtonName:'Add',selectedOpenAIAssistantId,credential};setDialogProps(dialogProp);setShowDialog(true);};const edit=selectedAssistant=>{const dialogProp={title:'Edit Assistant',type:'EDIT',cancelButtonName:'Cancel',confirmButtonName:'Save',data:selectedAssistant};setDialogProps(dialogProp);setShowDialog(true);};const onConfirm=()=>{setShowDialog(false);getAllAssistantsApi.request();};useEffect(()=>{getAllAssistantsApi.request();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(MainCard,{sx:{background:customization.isDarkMode?theme.palette.common.black:''},children:[/*#__PURE__*/_jsx(Stack,{flexDirection:\"row\",children:/*#__PURE__*/_jsxs(Grid,{sx:{mb:1.25},container:true,direction:\"row\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"OpenAI Assistants\"}),/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1}}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",sx:{mr:2},onClick:loadExisting,startIcon:/*#__PURE__*/_jsx(IconFileImport,{}),children:\"Load\"}),/*#__PURE__*/_jsx(StyledButton,{variant:\"contained\",sx:{color:'white'},onClick:addNew,startIcon:/*#__PURE__*/_jsx(IconPlus,{}),children:\"Add\"})]})]})}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:gridSpacing,children:!getAllAssistantsApi.loading&&getAllAssistantsApi.data&&getAllAssistantsApi.data.map((data,index)=>{var _JSON$parse,_JSON$parse2;return/*#__PURE__*/_jsx(Grid,{item:true,lg:3,md:4,sm:6,xs:12,children:/*#__PURE__*/_jsx(ItemCard,{data:{name:(_JSON$parse=JSON.parse(data.details))===null||_JSON$parse===void 0?void 0:_JSON$parse.name,description:(_JSON$parse2=JSON.parse(data.details))===null||_JSON$parse2===void 0?void 0:_JSON$parse2.instructions,iconSrc:data.iconSrc},onClick:()=>edit(data)})},index);})}),!getAllAssistantsApi.loading&&(!getAllAssistantsApi.data||getAllAssistantsApi.data.length===0)&&/*#__PURE__*/_jsxs(Stack,{sx:{alignItems:'center',justifyContent:'center'},flexDirection:\"column\",children:[/*#__PURE__*/_jsx(Box,{sx:{p:2,height:'auto'},children:/*#__PURE__*/_jsx(\"img\",{style:{objectFit:'cover',height:'30vh',width:'auto'},src:ToolEmptySVG,alt:\"ToolEmptySVG\"})}),/*#__PURE__*/_jsx(\"div\",{children:\"No Assistants Added Yet\"})]})]}),/*#__PURE__*/_jsx(LoadAssistantDialog,{show:showLoadDialog,dialogProps:loadDialogProps,onCancel:()=>setShowLoadDialog(false),onAssistantSelected:onAssistantSelected}),/*#__PURE__*/_jsx(AssistantDialog,{show:showDialog,dialogProps:dialogProps,onCancel:()=>setShowDialog(false),onConfirm:onConfirm})]});};export default Assistants;","map":{"version":3,"names":["useEffect","useState","useSelector","Grid","Box","Stack","Button","useTheme","MainCard","ItemCard","gridSpacing","ToolEmptySVG","StyledButton","AssistantDialog","LoadAssistantDialog","assistantsApi","useApi","IconPlus","IconFileImport","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Assistants","theme","customization","state","getAllAssistantsApi","getAllAssistants","showDialog","setShowDialog","dialogProps","setDialogProps","showLoadDialog","setShowLoadDialog","loadDialogProps","setLoadDialogProps","loadExisting","dialogProp","title","onAssistantSelected","selectedOpenAIAssistantId","credential","addNew","type","cancelButtonName","confirmButtonName","edit","selectedAssistant","data","onConfirm","request","children","sx","background","isDarkMode","palette","common","black","flexDirection","mb","container","direction","flexGrow","item","variant","mr","onClick","startIcon","color","spacing","loading","map","index","_JSON$parse","_JSON$parse2","lg","md","sm","xs","name","JSON","parse","details","description","instructions","iconSrc","length","alignItems","justifyContent","p","height","style","objectFit","width","src","alt","show","onCancel"],"sources":["D:/Flowise/packages/ui/src/views/assistants/index.js"],"sourcesContent":["import { useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\n\r\n// material-ui\r\nimport { Grid, Box, Stack, Button } from '@mui/material'\r\nimport { useTheme } from '@mui/material/styles'\r\n\r\n// project imports\r\nimport MainCard from 'ui-component/cards/MainCard'\r\nimport ItemCard from 'ui-component/cards/ItemCard'\r\nimport { gridSpacing } from 'store/constant'\r\nimport ToolEmptySVG from 'assets/images/tools_empty.svg'\r\nimport { StyledButton } from 'ui-component/button/StyledButton'\r\nimport AssistantDialog from './AssistantDialog'\r\nimport LoadAssistantDialog from './LoadAssistantDialog'\r\n\r\n// API\r\nimport assistantsApi from 'api/assistants'\r\n\r\n// Hooks\r\nimport useApi from 'hooks/useApi'\r\n\r\n// icons\r\nimport { IconPlus, IconFileImport } from '@tabler/icons'\r\n\r\n// ==============================|| CHATFLOWS ||============================== //\r\n\r\nconst Assistants = () => {\r\n    const theme = useTheme()\r\n    const customization = useSelector((state) => state.customization)\r\n\r\n    const getAllAssistantsApi = useApi(assistantsApi.getAllAssistants)\r\n\r\n    const [showDialog, setShowDialog] = useState(false)\r\n    const [dialogProps, setDialogProps] = useState({})\r\n    const [showLoadDialog, setShowLoadDialog] = useState(false)\r\n    const [loadDialogProps, setLoadDialogProps] = useState({})\r\n\r\n    const loadExisting = () => {\r\n        const dialogProp = {\r\n            title: 'Load Existing Assistant'\r\n        }\r\n        setLoadDialogProps(dialogProp)\r\n        setShowLoadDialog(true)\r\n    }\r\n\r\n    const onAssistantSelected = (selectedOpenAIAssistantId, credential) => {\r\n        setShowLoadDialog(false)\r\n        addNew(selectedOpenAIAssistantId, credential)\r\n    }\r\n\r\n    const addNew = (selectedOpenAIAssistantId, credential) => {\r\n        const dialogProp = {\r\n            title: 'Add New Assistant',\r\n            type: 'ADD',\r\n            cancelButtonName: 'Cancel',\r\n            confirmButtonName: 'Add',\r\n            selectedOpenAIAssistantId,\r\n            credential\r\n        }\r\n        setDialogProps(dialogProp)\r\n        setShowDialog(true)\r\n    }\r\n\r\n    const edit = (selectedAssistant) => {\r\n        const dialogProp = {\r\n            title: 'Edit Assistant',\r\n            type: 'EDIT',\r\n            cancelButtonName: 'Cancel',\r\n            confirmButtonName: 'Save',\r\n            data: selectedAssistant\r\n        }\r\n        setDialogProps(dialogProp)\r\n        setShowDialog(true)\r\n    }\r\n\r\n    const onConfirm = () => {\r\n        setShowDialog(false)\r\n        getAllAssistantsApi.request()\r\n    }\r\n\r\n    useEffect(() => {\r\n        getAllAssistantsApi.request()\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            <MainCard sx={{ background: customization.isDarkMode ? theme.palette.common.black : '' }}>\r\n                <Stack flexDirection='row'>\r\n                    <Grid sx={{ mb: 1.25 }} container direction='row'>\r\n                        <h1>OpenAI Assistants</h1>\r\n                        <Box sx={{ flexGrow: 1 }} />\r\n                        <Grid item>\r\n                            <Button variant='outlined' sx={{ mr: 2 }} onClick={loadExisting} startIcon={<IconFileImport />}>\r\n                                Load\r\n                            </Button>\r\n                            <StyledButton variant='contained' sx={{ color: 'white' }} onClick={addNew} startIcon={<IconPlus />}>\r\n                                Add\r\n                            </StyledButton>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Stack>\r\n                <Grid container spacing={gridSpacing}>\r\n                    {!getAllAssistantsApi.loading &&\r\n                        getAllAssistantsApi.data &&\r\n                        getAllAssistantsApi.data.map((data, index) => (\r\n                            <Grid key={index} item lg={3} md={4} sm={6} xs={12}>\r\n                                <ItemCard\r\n                                    data={{\r\n                                        name: JSON.parse(data.details)?.name,\r\n                                        description: JSON.parse(data.details)?.instructions,\r\n                                        iconSrc: data.iconSrc\r\n                                    }}\r\n                                    onClick={() => edit(data)}\r\n                                />\r\n                            </Grid>\r\n                        ))}\r\n                </Grid>\r\n                {!getAllAssistantsApi.loading && (!getAllAssistantsApi.data || getAllAssistantsApi.data.length === 0) && (\r\n                    <Stack sx={{ alignItems: 'center', justifyContent: 'center' }} flexDirection='column'>\r\n                        <Box sx={{ p: 2, height: 'auto' }}>\r\n                            <img style={{ objectFit: 'cover', height: '30vh', width: 'auto' }} src={ToolEmptySVG} alt='ToolEmptySVG' />\r\n                        </Box>\r\n                        <div>No Assistants Added Yet</div>\r\n                    </Stack>\r\n                )}\r\n            </MainCard>\r\n            <LoadAssistantDialog\r\n                show={showLoadDialog}\r\n                dialogProps={loadDialogProps}\r\n                onCancel={() => setShowLoadDialog(false)}\r\n                onAssistantSelected={onAssistantSelected}\r\n            ></LoadAssistantDialog>\r\n            <AssistantDialog\r\n                show={showDialog}\r\n                dialogProps={dialogProps}\r\n                onCancel={() => setShowDialog(false)}\r\n                onConfirm={onConfirm}\r\n            ></AssistantDialog>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Assistants\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}