{"ast":null,"code":"import{useState}from'react';import{useSelector}from'react-redux';import{Popper,FormControl,TextField,Box,Typography}from'@mui/material';import Autocomplete,{autocompleteClasses}from'@mui/material/Autocomplete';import{styled}from'@mui/material/styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const StyledPopper=styled(Popper)({boxShadow:'0px 8px 10px -5px rgb(0 0 0 / 20%), 0px 16px 24px 2px rgb(0 0 0 / 14%), 0px 6px 30px 5px rgb(0 0 0 / 12%)',borderRadius:'10px',[\"& .\".concat(autocompleteClasses.listbox)]:{boxSizing:'border-box','& ul':{padding:10,margin:10}}});export const MultiDropdown=_ref=>{let{name,value,options,onSelect,formControlSx={},disabled=false,disableClearable=false}=_ref;const customization=useSelector(state=>state.customization);const findMatchingOptions=function(){let options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];let internalValue=arguments.length>1?arguments[1]:undefined;let values=[];if(internalValue&&typeof internalValue==='string')values=JSON.parse(internalValue);else values=internalValue;return options.filter(option=>values.includes(option.name));};const getDefaultOptionValue=()=>[];let[internalValue,setInternalValue]=useState(value!==null&&value!==void 0?value:[]);return/*#__PURE__*/_jsx(FormControl,{sx:{mt:1,width:'100%',...formControlSx},size:\"small\",children:/*#__PURE__*/_jsx(Autocomplete,{id:name,disabled:disabled,disableClearable:disableClearable,size:\"small\",multiple:true,filterSelectedOptions:true,options:options||[],value:findMatchingOptions(options,internalValue)||getDefaultOptionValue(),onChange:(e,selections)=>{let value='';if(selections.length){const selectionNames=[];for(let i=0;i<selections.length;i+=1){selectionNames.push(selections[i].name);}value=JSON.stringify(selectionNames);}setInternalValue(value);onSelect(value);},PopperComponent:StyledPopper,renderInput:params=>/*#__PURE__*/_jsx(TextField,{...params,value:internalValue}),renderOption:(props,option)=>/*#__PURE__*/_jsx(Box,{component:\"li\",...props,children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:option.label}),option.description&&/*#__PURE__*/_jsx(Typography,{sx:{color:customization.isDarkMode?'#9e9e9e':''},children:option.description})]})})})});};","map":{"version":3,"names":["useState","useSelector","Popper","FormControl","TextField","Box","Typography","Autocomplete","autocompleteClasses","styled","jsx","_jsx","jsxs","_jsxs","StyledPopper","boxShadow","borderRadius","concat","listbox","boxSizing","padding","margin","MultiDropdown","_ref","name","value","options","onSelect","formControlSx","disabled","disableClearable","customization","state","findMatchingOptions","arguments","length","undefined","internalValue","values","JSON","parse","filter","option","includes","getDefaultOptionValue","setInternalValue","sx","mt","width","size","children","id","multiple","filterSelectedOptions","onChange","e","selections","selectionNames","i","push","stringify","PopperComponent","renderInput","params","renderOption","props","component","style","display","flexDirection","variant","label","description","color","isDarkMode"],"sources":["D:/Flowise/packages/ui/src/ui-component/dropdown/MultiDropdown.js"],"sourcesContent":["import { useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\n\r\nimport { Popper, FormControl, TextField, Box, Typography } from '@mui/material'\r\nimport Autocomplete, { autocompleteClasses } from '@mui/material/Autocomplete'\r\nimport { styled } from '@mui/material/styles'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst StyledPopper = styled(Popper)({\r\n    boxShadow: '0px 8px 10px -5px rgb(0 0 0 / 20%), 0px 16px 24px 2px rgb(0 0 0 / 14%), 0px 6px 30px 5px rgb(0 0 0 / 12%)',\r\n    borderRadius: '10px',\r\n    [`& .${autocompleteClasses.listbox}`]: {\r\n        boxSizing: 'border-box',\r\n        '& ul': {\r\n            padding: 10,\r\n            margin: 10\r\n        }\r\n    }\r\n})\r\n\r\nexport const MultiDropdown = ({ name, value, options, onSelect, formControlSx = {}, disabled = false, disableClearable = false }) => {\r\n    const customization = useSelector((state) => state.customization)\r\n    const findMatchingOptions = (options = [], internalValue) => {\r\n        let values = []\r\n        if (internalValue && typeof internalValue === 'string') values = JSON.parse(internalValue)\r\n        else values = internalValue\r\n        return options.filter((option) => values.includes(option.name))\r\n    }\r\n    const getDefaultOptionValue = () => []\r\n    let [internalValue, setInternalValue] = useState(value ?? [])\r\n\r\n    return (\r\n        <FormControl sx={{ mt: 1, width: '100%', ...formControlSx }} size='small'>\r\n            <Autocomplete\r\n                id={name}\r\n                disabled={disabled}\r\n                disableClearable={disableClearable}\r\n                size='small'\r\n                multiple\r\n                filterSelectedOptions\r\n                options={options || []}\r\n                value={findMatchingOptions(options, internalValue) || getDefaultOptionValue()}\r\n                onChange={(e, selections) => {\r\n                    let value = ''\r\n                    if (selections.length) {\r\n                        const selectionNames = []\r\n                        for (let i = 0; i < selections.length; i += 1) {\r\n                            selectionNames.push(selections[i].name)\r\n                        }\r\n                        value = JSON.stringify(selectionNames)\r\n                    }\r\n                    setInternalValue(value)\r\n                    onSelect(value)\r\n                }}\r\n                PopperComponent={StyledPopper}\r\n                renderInput={(params) => <TextField {...params} value={internalValue} />}\r\n                renderOption={(props, option) => (\r\n                    <Box component='li' {...props}>\r\n                        <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n                            <Typography variant='h5'>{option.label}</Typography>\r\n                            {option.description && (\r\n                                <Typography sx={{ color: customization.isDarkMode ? '#9e9e9e' : '' }}>{option.description}</Typography>\r\n                            )}\r\n                        </div>\r\n                    </Box>\r\n                )}\r\n            />\r\n        </FormControl>\r\n    )\r\n}\r\n\r\nMultiDropdown.propTypes = {\r\n    name: PropTypes.string,\r\n    value: PropTypes.string,\r\n    options: PropTypes.array,\r\n    onSelect: PropTypes.func,\r\n    disabled: PropTypes.bool,\r\n    formControlSx: PropTypes.object,\r\n    disableClearable: PropTypes.bool\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}