{"ast":null,"code":"import{useEffect,useRef}from'react';import ReactFlow,{Controls,Background,useNodesState,useEdgesState}from'reactflow';import'reactflow/dist/style.css';import'views/canvas/index.css';import{useLocation,useNavigate}from'react-router-dom';// material-ui\nimport{Toolbar,Box,AppBar}from'@mui/material';import{useTheme}from'@mui/material/styles';// project imports\nimport MarketplaceCanvasNode from'./MarketplaceCanvasNode';import MarketplaceCanvasHeader from'./MarketplaceCanvasHeader';import StickyNote from'../canvas/StickyNote';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const nodeTypes={customNode:MarketplaceCanvasNode,stickyNote:StickyNote};const edgeTypes={buttonedge:''};// ==============================|| CANVAS ||============================== //\nconst MarketplaceCanvas=()=>{const theme=useTheme();const navigate=useNavigate();const{state}=useLocation();const{flowData,name}=state;// ==============================|| ReactFlow ||============================== //\nconst[nodes,setNodes,onNodesChange]=useNodesState();const[edges,setEdges,onEdgesChange]=useEdgesState();const reactFlowWrapper=useRef(null);// ==============================|| useEffect ||============================== //\nuseEffect(()=>{if(flowData){const initialFlow=JSON.parse(flowData);setNodes(initialFlow.nodes||[]);setEdges(initialFlow.edges||[]);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[flowData]);const onChatflowCopy=flowData=>{const templateFlowData=JSON.stringify(flowData);navigate(\"/canvas\",{state:{templateFlowData}});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(AppBar,{enableColorOnDark:true,position:\"fixed\",color:\"inherit\",elevation:1,sx:{bgcolor:theme.palette.background.default},children:/*#__PURE__*/_jsx(Toolbar,{children:/*#__PURE__*/_jsx(MarketplaceCanvasHeader,{flowName:name,flowData:JSON.parse(flowData),onChatflowCopy:flowData=>onChatflowCopy(flowData)})})}),/*#__PURE__*/_jsx(Box,{sx:{pt:'70px',height:'100vh',width:'100%'},children:/*#__PURE__*/_jsx(\"div\",{className:\"reactflow-parent-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"reactflow-wrapper\",ref:reactFlowWrapper,children:/*#__PURE__*/_jsxs(ReactFlow,{nodes:nodes,edges:edges,onNodesChange:onNodesChange,onEdgesChange:onEdgesChange,nodesDraggable:false,nodeTypes:nodeTypes,edgeTypes:edgeTypes,fitView:true,minZoom:0.1,children:[/*#__PURE__*/_jsx(Controls,{style:{display:'flex',flexDirection:'row',left:'50%',transform:'translate(-50%, -50%)'}}),/*#__PURE__*/_jsx(Background,{color:\"#aaa\",gap:16})]})})})})]})});};export default MarketplaceCanvas;","map":{"version":3,"names":["useEffect","useRef","ReactFlow","Controls","Background","useNodesState","useEdgesState","useLocation","useNavigate","Toolbar","Box","AppBar","useTheme","MarketplaceCanvasNode","MarketplaceCanvasHeader","StickyNote","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","nodeTypes","customNode","stickyNote","edgeTypes","buttonedge","MarketplaceCanvas","theme","navigate","state","flowData","name","nodes","setNodes","onNodesChange","edges","setEdges","onEdgesChange","reactFlowWrapper","initialFlow","JSON","parse","onChatflowCopy","templateFlowData","stringify","children","enableColorOnDark","position","color","elevation","sx","bgcolor","palette","background","default","flowName","pt","height","width","className","ref","nodesDraggable","fitView","minZoom","style","display","flexDirection","left","transform","gap"],"sources":["D:/Flowise/packages/ui/src/views/marketplaces/MarketplaceCanvas.js"],"sourcesContent":["import { useEffect, useRef } from 'react'\r\nimport ReactFlow, { Controls, Background, useNodesState, useEdgesState } from 'reactflow'\r\nimport 'reactflow/dist/style.css'\r\nimport 'views/canvas/index.css'\r\n\r\nimport { useLocation, useNavigate } from 'react-router-dom'\r\n\r\n// material-ui\r\nimport { Toolbar, Box, AppBar } from '@mui/material'\r\nimport { useTheme } from '@mui/material/styles'\r\n\r\n// project imports\r\nimport MarketplaceCanvasNode from './MarketplaceCanvasNode'\r\nimport MarketplaceCanvasHeader from './MarketplaceCanvasHeader'\r\nimport StickyNote from '../canvas/StickyNote'\r\n\r\nconst nodeTypes = { customNode: MarketplaceCanvasNode, stickyNote: StickyNote }\r\nconst edgeTypes = { buttonedge: '' }\r\n\r\n// ==============================|| CANVAS ||============================== //\r\n\r\nconst MarketplaceCanvas = () => {\r\n    const theme = useTheme()\r\n    const navigate = useNavigate()\r\n\r\n    const { state } = useLocation()\r\n    const { flowData, name } = state\r\n\r\n    // ==============================|| ReactFlow ||============================== //\r\n\r\n    const [nodes, setNodes, onNodesChange] = useNodesState()\r\n    const [edges, setEdges, onEdgesChange] = useEdgesState()\r\n\r\n    const reactFlowWrapper = useRef(null)\r\n\r\n    // ==============================|| useEffect ||============================== //\r\n\r\n    useEffect(() => {\r\n        if (flowData) {\r\n            const initialFlow = JSON.parse(flowData)\r\n            setNodes(initialFlow.nodes || [])\r\n            setEdges(initialFlow.edges || [])\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [flowData])\r\n\r\n    const onChatflowCopy = (flowData) => {\r\n        const templateFlowData = JSON.stringify(flowData)\r\n        navigate(`/canvas`, { state: { templateFlowData } })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Box>\r\n                <AppBar\r\n                    enableColorOnDark\r\n                    position='fixed'\r\n                    color='inherit'\r\n                    elevation={1}\r\n                    sx={{\r\n                        bgcolor: theme.palette.background.default\r\n                    }}\r\n                >\r\n                    <Toolbar>\r\n                        <MarketplaceCanvasHeader\r\n                            flowName={name}\r\n                            flowData={JSON.parse(flowData)}\r\n                            onChatflowCopy={(flowData) => onChatflowCopy(flowData)}\r\n                        />\r\n                    </Toolbar>\r\n                </AppBar>\r\n                <Box sx={{ pt: '70px', height: '100vh', width: '100%' }}>\r\n                    <div className='reactflow-parent-wrapper'>\r\n                        <div className='reactflow-wrapper' ref={reactFlowWrapper}>\r\n                            <ReactFlow\r\n                                nodes={nodes}\r\n                                edges={edges}\r\n                                onNodesChange={onNodesChange}\r\n                                onEdgesChange={onEdgesChange}\r\n                                nodesDraggable={false}\r\n                                nodeTypes={nodeTypes}\r\n                                edgeTypes={edgeTypes}\r\n                                fitView\r\n                                minZoom={0.1}\r\n                            >\r\n                                <Controls\r\n                                    style={{\r\n                                        display: 'flex',\r\n                                        flexDirection: 'row',\r\n                                        left: '50%',\r\n                                        transform: 'translate(-50%, -50%)'\r\n                                    }}\r\n                                />\r\n                                <Background color='#aaa' gap={16} />\r\n                            </ReactFlow>\r\n                        </div>\r\n                    </div>\r\n                </Box>\r\n            </Box>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default MarketplaceCanvas\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}