{"ast":null,"code":"import{useCallback,useContext,useEffect}from'react';import{UNSAFE_NavigationContext as NavigationContext}from'react-router-dom';// https://stackoverflow.com/questions/71572678/react-router-v-6-useprompt-typescript\nexport function useBlocker(blocker){let when=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;const{navigator}=useContext(NavigationContext);useEffect(()=>{if(!when)return;const unblock=navigator.block(tx=>{const autoUnblockingTx={...tx,retry(){unblock();tx.retry();}};blocker(autoUnblockingTx);});return unblock;},[navigator,blocker,when]);}export function usePrompt(message){let when=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;const blocker=useCallback(tx=>{if(window.confirm(message))tx.retry();},[message]);useBlocker(blocker,when);}","map":{"version":3,"names":["useCallback","useContext","useEffect","UNSAFE_NavigationContext","NavigationContext","useBlocker","blocker","when","arguments","length","undefined","navigator","unblock","block","tx","autoUnblockingTx","retry","usePrompt","message","window","confirm"],"sources":["D:/Flowise/packages/ui/src/utils/usePrompt.js"],"sourcesContent":["import { useCallback, useContext, useEffect } from 'react'\r\nimport { UNSAFE_NavigationContext as NavigationContext } from 'react-router-dom'\r\n\r\n// https://stackoverflow.com/questions/71572678/react-router-v-6-useprompt-typescript\r\n\r\nexport function useBlocker(blocker, when = true) {\r\n    const { navigator } = useContext(NavigationContext)\r\n\r\n    useEffect(() => {\r\n        if (!when) return\r\n\r\n        const unblock = navigator.block((tx) => {\r\n            const autoUnblockingTx = {\r\n                ...tx,\r\n                retry() {\r\n                    unblock()\r\n                    tx.retry()\r\n                }\r\n            }\r\n\r\n            blocker(autoUnblockingTx)\r\n        })\r\n\r\n        return unblock\r\n    }, [navigator, blocker, when])\r\n}\r\n\r\nexport function usePrompt(message, when = true) {\r\n    const blocker = useCallback(\r\n        (tx) => {\r\n            if (window.confirm(message)) tx.retry()\r\n        },\r\n        [message]\r\n    )\r\n\r\n    useBlocker(blocker, when)\r\n}\r\n"],"mappings":"AAAA,OAASA,WAAW,CAAEC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CAC1D,OAASC,wBAAwB,GAAI,CAAAC,iBAAiB,KAAQ,kBAAkB,CAEhF;AAEA,MAAO,SAAS,CAAAC,UAAUA,CAACC,OAAO,CAAe,IAAb,CAAAC,IAAI,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,IAAI,CAC3C,KAAM,CAAEG,SAAU,CAAC,CAAGV,UAAU,CAACG,iBAAiB,CAAC,CAEnDF,SAAS,CAAC,IAAM,CACZ,GAAI,CAACK,IAAI,CAAE,OAEX,KAAM,CAAAK,OAAO,CAAGD,SAAS,CAACE,KAAK,CAAEC,EAAE,EAAK,CACpC,KAAM,CAAAC,gBAAgB,CAAG,CACrB,GAAGD,EAAE,CACLE,KAAKA,CAAA,CAAG,CACJJ,OAAO,CAAC,CAAC,CACTE,EAAE,CAACE,KAAK,CAAC,CAAC,CACd,CACJ,CAAC,CAEDV,OAAO,CAACS,gBAAgB,CAAC,CAC7B,CAAC,CAAC,CAEF,MAAO,CAAAH,OAAO,CAClB,CAAC,CAAE,CAACD,SAAS,CAAEL,OAAO,CAAEC,IAAI,CAAC,CAAC,CAClC,CAEA,MAAO,SAAS,CAAAU,SAASA,CAACC,OAAO,CAAe,IAAb,CAAAX,IAAI,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,IAAI,CAC1C,KAAM,CAAAF,OAAO,CAAGN,WAAW,CACtBc,EAAE,EAAK,CACJ,GAAIK,MAAM,CAACC,OAAO,CAACF,OAAO,CAAC,CAAEJ,EAAE,CAACE,KAAK,CAAC,CAAC,CAC3C,CAAC,CACD,CAACE,OAAO,CACZ,CAAC,CAEDb,UAAU,CAACC,OAAO,CAAEC,IAAI,CAAC,CAC7B"},"metadata":{},"sourceType":"module","externalDependencies":[]}