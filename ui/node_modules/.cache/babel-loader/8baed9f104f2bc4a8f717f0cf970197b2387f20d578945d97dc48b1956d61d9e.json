{"ast":null,"code":"import{useEffect,useState,useRef}from'react';import{useSelector}from'react-redux';// material-ui\nimport{Grid,Box,Stack,Button}from'@mui/material';import{useTheme}from'@mui/material/styles';// project imports\nimport MainCard from'ui-component/cards/MainCard';import ItemCard from'ui-component/cards/ItemCard';import{gridSpacing}from'store/constant';import ToolEmptySVG from'assets/images/tools_empty.svg';import{StyledButton}from'ui-component/button/StyledButton';import ToolDialog from'./ToolDialog';// API\nimport toolsApi from'api/tools';// Hooks\nimport useApi from'hooks/useApi';// icons\nimport{IconPlus,IconFileImport}from'@tabler/icons';// ==============================|| CHATFLOWS ||============================== //\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Tools=()=>{const theme=useTheme();const customization=useSelector(state=>state.customization);const getAllToolsApi=useApi(toolsApi.getAllTools);const[showDialog,setShowDialog]=useState(false);const[dialogProps,setDialogProps]=useState({});const inputRef=useRef(null);const onUploadFile=file=>{try{const dialogProp={title:'Add New Tool',type:'IMPORT',cancelButtonName:'Cancel',confirmButtonName:'Save',data:JSON.parse(file)};setDialogProps(dialogProp);setShowDialog(true);}catch(e){console.error(e);}};const handleFileUpload=e=>{if(!e.target.files)return;const file=e.target.files[0];const reader=new FileReader();reader.onload=evt=>{var _evt$target;if(!(evt!==null&&evt!==void 0&&(_evt$target=evt.target)!==null&&_evt$target!==void 0&&_evt$target.result)){return;}const{result}=evt.target;onUploadFile(result);};reader.readAsText(file);};const addNew=()=>{const dialogProp={title:'Add New Tool',type:'ADD',cancelButtonName:'Cancel',confirmButtonName:'Add'};setDialogProps(dialogProp);setShowDialog(true);};const edit=selectedTool=>{const dialogProp={title:'Edit Tool',type:'EDIT',cancelButtonName:'Cancel',confirmButtonName:'Save',data:selectedTool};setDialogProps(dialogProp);setShowDialog(true);};const onConfirm=()=>{setShowDialog(false);getAllToolsApi.request();};useEffect(()=>{getAllToolsApi.request();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(MainCard,{sx:{background:customization.isDarkMode?theme.palette.common.black:''},children:[/*#__PURE__*/_jsxs(Stack,{flexDirection:\"row\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Tools\"}),/*#__PURE__*/_jsxs(Grid,{sx:{mb:1.25},container:true,direction:\"row\",children:[/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1}}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",sx:{mr:2},onClick:()=>inputRef.current.click(),startIcon:/*#__PURE__*/_jsx(IconFileImport,{}),children:\"Load\"}),/*#__PURE__*/_jsx(\"input\",{ref:inputRef,type:\"file\",hidden:true,accept:\".json\",onChange:e=>handleFileUpload(e)}),/*#__PURE__*/_jsx(StyledButton,{variant:\"contained\",sx:{color:'white'},onClick:addNew,startIcon:/*#__PURE__*/_jsx(IconPlus,{}),children:\"Create\"})]})]})]}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:gridSpacing,children:!getAllToolsApi.loading&&getAllToolsApi.data&&getAllToolsApi.data.map((data,index)=>/*#__PURE__*/_jsx(Grid,{item:true,lg:3,md:4,sm:6,xs:12,children:/*#__PURE__*/_jsx(ItemCard,{data:data,onClick:()=>edit(data)})},index))}),!getAllToolsApi.loading&&(!getAllToolsApi.data||getAllToolsApi.data.length===0)&&/*#__PURE__*/_jsxs(Stack,{sx:{alignItems:'center',justifyContent:'center'},flexDirection:\"column\",children:[/*#__PURE__*/_jsx(Box,{sx:{p:2,height:'auto'},children:/*#__PURE__*/_jsx(\"img\",{style:{objectFit:'cover',height:'30vh',width:'auto'},src:ToolEmptySVG,alt:\"ToolEmptySVG\"})}),/*#__PURE__*/_jsx(\"div\",{children:\"No Tools Created Yet\"})]})]}),/*#__PURE__*/_jsx(ToolDialog,{show:showDialog,dialogProps:dialogProps,onCancel:()=>setShowDialog(false),onConfirm:onConfirm})]});};export default Tools;","map":{"version":3,"names":["useEffect","useState","useRef","useSelector","Grid","Box","Stack","Button","useTheme","MainCard","ItemCard","gridSpacing","ToolEmptySVG","StyledButton","ToolDialog","toolsApi","useApi","IconPlus","IconFileImport","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Tools","theme","customization","state","getAllToolsApi","getAllTools","showDialog","setShowDialog","dialogProps","setDialogProps","inputRef","onUploadFile","file","dialogProp","title","type","cancelButtonName","confirmButtonName","data","JSON","parse","e","console","error","handleFileUpload","target","files","reader","FileReader","onload","evt","_evt$target","result","readAsText","addNew","edit","selectedTool","onConfirm","request","children","sx","background","isDarkMode","palette","common","black","flexDirection","mb","container","direction","flexGrow","item","variant","mr","onClick","current","click","startIcon","ref","hidden","accept","onChange","color","spacing","loading","map","index","lg","md","sm","xs","length","alignItems","justifyContent","p","height","style","objectFit","width","src","alt","show","onCancel"],"sources":["D:/Flowise/packages/ui/src/views/tools/index.js"],"sourcesContent":["import { useEffect, useState, useRef } from 'react'\r\nimport { useSelector } from 'react-redux'\r\n\r\n// material-ui\r\nimport { Grid, Box, Stack, Button } from '@mui/material'\r\nimport { useTheme } from '@mui/material/styles'\r\n\r\n// project imports\r\nimport MainCard from 'ui-component/cards/MainCard'\r\nimport ItemCard from 'ui-component/cards/ItemCard'\r\nimport { gridSpacing } from 'store/constant'\r\nimport ToolEmptySVG from 'assets/images/tools_empty.svg'\r\nimport { StyledButton } from 'ui-component/button/StyledButton'\r\nimport ToolDialog from './ToolDialog'\r\n\r\n// API\r\nimport toolsApi from 'api/tools'\r\n\r\n// Hooks\r\nimport useApi from 'hooks/useApi'\r\n\r\n// icons\r\nimport { IconPlus, IconFileImport } from '@tabler/icons'\r\n\r\n// ==============================|| CHATFLOWS ||============================== //\r\n\r\nconst Tools = () => {\r\n    const theme = useTheme()\r\n    const customization = useSelector((state) => state.customization)\r\n\r\n    const getAllToolsApi = useApi(toolsApi.getAllTools)\r\n\r\n    const [showDialog, setShowDialog] = useState(false)\r\n    const [dialogProps, setDialogProps] = useState({})\r\n\r\n    const inputRef = useRef(null)\r\n\r\n    const onUploadFile = (file) => {\r\n        try {\r\n            const dialogProp = {\r\n                title: 'Add New Tool',\r\n                type: 'IMPORT',\r\n                cancelButtonName: 'Cancel',\r\n                confirmButtonName: 'Save',\r\n                data: JSON.parse(file)\r\n            }\r\n            setDialogProps(dialogProp)\r\n            setShowDialog(true)\r\n        } catch (e) {\r\n            console.error(e)\r\n        }\r\n    }\r\n\r\n    const handleFileUpload = (e) => {\r\n        if (!e.target.files) return\r\n\r\n        const file = e.target.files[0]\r\n\r\n        const reader = new FileReader()\r\n        reader.onload = (evt) => {\r\n            if (!evt?.target?.result) {\r\n                return\r\n            }\r\n            const { result } = evt.target\r\n            onUploadFile(result)\r\n        }\r\n        reader.readAsText(file)\r\n    }\r\n\r\n    const addNew = () => {\r\n        const dialogProp = {\r\n            title: 'Add New Tool',\r\n            type: 'ADD',\r\n            cancelButtonName: 'Cancel',\r\n            confirmButtonName: 'Add'\r\n        }\r\n        setDialogProps(dialogProp)\r\n        setShowDialog(true)\r\n    }\r\n\r\n    const edit = (selectedTool) => {\r\n        const dialogProp = {\r\n            title: 'Edit Tool',\r\n            type: 'EDIT',\r\n            cancelButtonName: 'Cancel',\r\n            confirmButtonName: 'Save',\r\n            data: selectedTool\r\n        }\r\n        setDialogProps(dialogProp)\r\n        setShowDialog(true)\r\n    }\r\n\r\n    const onConfirm = () => {\r\n        setShowDialog(false)\r\n        getAllToolsApi.request()\r\n    }\r\n\r\n    useEffect(() => {\r\n        getAllToolsApi.request()\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            <MainCard sx={{ background: customization.isDarkMode ? theme.palette.common.black : '' }}>\r\n                <Stack flexDirection='row'>\r\n                    <h1>Tools</h1>\r\n                    <Grid sx={{ mb: 1.25 }} container direction='row'>\r\n                        <Box sx={{ flexGrow: 1 }} />\r\n                        <Grid item>\r\n                            <Button\r\n                                variant='outlined'\r\n                                sx={{ mr: 2 }}\r\n                                onClick={() => inputRef.current.click()}\r\n                                startIcon={<IconFileImport />}\r\n                            >\r\n                                Load\r\n                            </Button>\r\n                            <input ref={inputRef} type='file' hidden accept='.json' onChange={(e) => handleFileUpload(e)} />\r\n                            <StyledButton variant='contained' sx={{ color: 'white' }} onClick={addNew} startIcon={<IconPlus />}>\r\n                                Create\r\n                            </StyledButton>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Stack>\r\n                <Grid container spacing={gridSpacing}>\r\n                    {!getAllToolsApi.loading &&\r\n                        getAllToolsApi.data &&\r\n                        getAllToolsApi.data.map((data, index) => (\r\n                            <Grid key={index} item lg={3} md={4} sm={6} xs={12}>\r\n                                <ItemCard data={data} onClick={() => edit(data)} />\r\n                            </Grid>\r\n                        ))}\r\n                </Grid>\r\n                {!getAllToolsApi.loading && (!getAllToolsApi.data || getAllToolsApi.data.length === 0) && (\r\n                    <Stack sx={{ alignItems: 'center', justifyContent: 'center' }} flexDirection='column'>\r\n                        <Box sx={{ p: 2, height: 'auto' }}>\r\n                            <img style={{ objectFit: 'cover', height: '30vh', width: 'auto' }} src={ToolEmptySVG} alt='ToolEmptySVG' />\r\n                        </Box>\r\n                        <div>No Tools Created Yet</div>\r\n                    </Stack>\r\n                )}\r\n            </MainCard>\r\n            <ToolDialog\r\n                show={showDialog}\r\n                dialogProps={dialogProps}\r\n                onCancel={() => setShowDialog(false)}\r\n                onConfirm={onConfirm}\r\n            ></ToolDialog>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Tools\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}