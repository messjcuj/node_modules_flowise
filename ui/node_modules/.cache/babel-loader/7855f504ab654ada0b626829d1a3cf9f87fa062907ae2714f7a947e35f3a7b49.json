{"ast":null,"code":"import{useState,useEffect}from'react';import{createPortal}from'react-dom';import{useSelector,useDispatch}from'react-redux';import{List,ListItemButton,ListItem,ListItemAvatar,ListItemText,Dialog,DialogContent,DialogTitle,Box,OutlinedInput,InputAdornment}from'@mui/material';import{useTheme}from'@mui/material/styles';import{IconSearch,IconX}from'@tabler/icons';// const\nimport{baseURL}from'store/constant';import{HIDE_CANVAS_DIALOG,SHOW_CANVAS_DIALOG}from'store/actions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CredentialListDialog=_ref=>{let{show,dialogProps,onCancel,onCredentialSelected}=_ref;const portalElement=document.getElementById('portal');const customization=useSelector(state=>state.customization);const dispatch=useDispatch();const theme=useTheme();const[searchValue,setSearchValue]=useState('');const[componentsCredentials,setComponentsCredentials]=useState([]);const filterSearch=value=>{setSearchValue(value);setTimeout(()=>{if(value){const searchData=dialogProps.componentsCredentials.filter(crd=>crd.name.toLowerCase().includes(value.toLowerCase()));setComponentsCredentials(searchData);}else if(value===''){setComponentsCredentials(dialogProps.componentsCredentials);}// scrollTop()\n},500);};useEffect(()=>{if(dialogProps.componentsCredentials){setComponentsCredentials(dialogProps.componentsCredentials);}},[dialogProps]);useEffect(()=>{if(show)dispatch({type:SHOW_CANVAS_DIALOG});else dispatch({type:HIDE_CANVAS_DIALOG});return()=>dispatch({type:HIDE_CANVAS_DIALOG});},[show,dispatch]);const component=show?/*#__PURE__*/_jsxs(Dialog,{fullWidth:true,maxWidth:\"xs\",open:show,onClose:onCancel,\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\",children:[/*#__PURE__*/_jsxs(DialogTitle,{sx:{fontSize:'1rem'},id:\"alert-dialog-title\",children:[dialogProps.title,/*#__PURE__*/_jsx(Box,{sx:{p:2},children:/*#__PURE__*/_jsx(OutlinedInput,{sx:{width:'100%',pr:2,pl:2,my:2},id:\"input-search-credential\",value:searchValue,onChange:e=>filterSearch(e.target.value),placeholder:\"Search credential\",startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(IconSearch,{stroke:1.5,size:\"1rem\",color:theme.palette.grey[500]})}),endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",sx:{cursor:'pointer',color:theme.palette.grey[500],'&:hover':{color:theme.palette.grey[900]}},title:\"Clear Search\",children:/*#__PURE__*/_jsx(IconX,{stroke:1.5,size:\"1rem\",onClick:()=>filterSearch(''),style:{cursor:'pointer'}})}),\"aria-describedby\":\"search-helper-text\",inputProps:{'aria-label':'weight'}})})]}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(List,{sx:{width:'100%',py:0,borderRadius:'10px',[theme.breakpoints.down('md')]:{maxWidth:370},'& .MuiListItemSecondaryAction-root':{top:22},'& .MuiDivider-root':{my:0},'& .list-container':{pl:7}},children:[...componentsCredentials].map(componentCredential=>/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ListItemButton,{onClick:()=>onCredentialSelected(componentCredential),sx:{p:0,borderRadius:\"\".concat(customization.borderRadius,\"px\")},children:/*#__PURE__*/_jsxs(ListItem,{alignItems:\"center\",children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(\"div\",{style:{width:50,height:50,borderRadius:'50%',backgroundColor:'white'},children:/*#__PURE__*/_jsx(\"img\",{style:{width:'100%',height:'100%',padding:7,borderRadius:'50%',objectFit:'contain'},alt:componentCredential.name,src:\"\".concat(baseURL,\"/api/v1/components-credentials-icon/\").concat(componentCredential.name)})})}),/*#__PURE__*/_jsx(ListItemText,{sx:{ml:1},primary:componentCredential.label})]})})},componentCredential.name))})})]}):null;return/*#__PURE__*/createPortal(component,portalElement);};export default CredentialListDialog;","map":{"version":3,"names":["useState","useEffect","createPortal","useSelector","useDispatch","List","ListItemButton","ListItem","ListItemAvatar","ListItemText","Dialog","DialogContent","DialogTitle","Box","OutlinedInput","InputAdornment","useTheme","IconSearch","IconX","baseURL","HIDE_CANVAS_DIALOG","SHOW_CANVAS_DIALOG","jsx","_jsx","jsxs","_jsxs","CredentialListDialog","_ref","show","dialogProps","onCancel","onCredentialSelected","portalElement","document","getElementById","customization","state","dispatch","theme","searchValue","setSearchValue","componentsCredentials","setComponentsCredentials","filterSearch","value","setTimeout","searchData","filter","crd","name","toLowerCase","includes","type","component","fullWidth","maxWidth","open","onClose","children","sx","fontSize","id","title","p","width","pr","pl","my","onChange","e","target","placeholder","startAdornment","position","stroke","size","color","palette","grey","endAdornment","cursor","onClick","style","inputProps","py","borderRadius","breakpoints","down","top","map","componentCredential","concat","alignItems","height","backgroundColor","padding","objectFit","alt","src","ml","primary","label"],"sources":["D:/Flowise/packages/ui/src/views/credentials/CredentialListDialog.js"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n    List,\r\n    ListItemButton,\r\n    ListItem,\r\n    ListItemAvatar,\r\n    ListItemText,\r\n    Dialog,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Box,\r\n    OutlinedInput,\r\n    InputAdornment\r\n} from '@mui/material'\r\nimport { useTheme } from '@mui/material/styles'\r\nimport { IconSearch, IconX } from '@tabler/icons'\r\n\r\n// const\r\nimport { baseURL } from 'store/constant'\r\nimport { HIDE_CANVAS_DIALOG, SHOW_CANVAS_DIALOG } from 'store/actions'\r\n\r\nconst CredentialListDialog = ({ show, dialogProps, onCancel, onCredentialSelected }) => {\r\n    const portalElement = document.getElementById('portal')\r\n    const customization = useSelector((state) => state.customization)\r\n    const dispatch = useDispatch()\r\n    const theme = useTheme()\r\n    const [searchValue, setSearchValue] = useState('')\r\n    const [componentsCredentials, setComponentsCredentials] = useState([])\r\n\r\n    const filterSearch = (value) => {\r\n        setSearchValue(value)\r\n        setTimeout(() => {\r\n            if (value) {\r\n                const searchData = dialogProps.componentsCredentials.filter((crd) => crd.name.toLowerCase().includes(value.toLowerCase()))\r\n                setComponentsCredentials(searchData)\r\n            } else if (value === '') {\r\n                setComponentsCredentials(dialogProps.componentsCredentials)\r\n            }\r\n            // scrollTop()\r\n        }, 500)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (dialogProps.componentsCredentials) {\r\n            setComponentsCredentials(dialogProps.componentsCredentials)\r\n        }\r\n    }, [dialogProps])\r\n\r\n    useEffect(() => {\r\n        if (show) dispatch({ type: SHOW_CANVAS_DIALOG })\r\n        else dispatch({ type: HIDE_CANVAS_DIALOG })\r\n        return () => dispatch({ type: HIDE_CANVAS_DIALOG })\r\n    }, [show, dispatch])\r\n\r\n    const component = show ? (\r\n        <Dialog\r\n            fullWidth\r\n            maxWidth='xs'\r\n            open={show}\r\n            onClose={onCancel}\r\n            aria-labelledby='alert-dialog-title'\r\n            aria-describedby='alert-dialog-description'\r\n        >\r\n            <DialogTitle sx={{ fontSize: '1rem' }} id='alert-dialog-title'>\r\n                {dialogProps.title}\r\n                <Box sx={{ p: 2 }}>\r\n                    <OutlinedInput\r\n                        sx={{ width: '100%', pr: 2, pl: 2, my: 2 }}\r\n                        id='input-search-credential'\r\n                        value={searchValue}\r\n                        onChange={(e) => filterSearch(e.target.value)}\r\n                        placeholder='Search credential'\r\n                        startAdornment={\r\n                            <InputAdornment position='start'>\r\n                                <IconSearch stroke={1.5} size='1rem' color={theme.palette.grey[500]} />\r\n                            </InputAdornment>\r\n                        }\r\n                        endAdornment={\r\n                            <InputAdornment\r\n                                position='end'\r\n                                sx={{\r\n                                    cursor: 'pointer',\r\n                                    color: theme.palette.grey[500],\r\n                                    '&:hover': {\r\n                                        color: theme.palette.grey[900]\r\n                                    }\r\n                                }}\r\n                                title='Clear Search'\r\n                            >\r\n                                <IconX\r\n                                    stroke={1.5}\r\n                                    size='1rem'\r\n                                    onClick={() => filterSearch('')}\r\n                                    style={{\r\n                                        cursor: 'pointer'\r\n                                    }}\r\n                                />\r\n                            </InputAdornment>\r\n                        }\r\n                        aria-describedby='search-helper-text'\r\n                        inputProps={{\r\n                            'aria-label': 'weight'\r\n                        }}\r\n                    />\r\n                </Box>\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <List\r\n                    sx={{\r\n                        width: '100%',\r\n                        py: 0,\r\n                        borderRadius: '10px',\r\n                        [theme.breakpoints.down('md')]: {\r\n                            maxWidth: 370\r\n                        },\r\n                        '& .MuiListItemSecondaryAction-root': {\r\n                            top: 22\r\n                        },\r\n                        '& .MuiDivider-root': {\r\n                            my: 0\r\n                        },\r\n                        '& .list-container': {\r\n                            pl: 7\r\n                        }\r\n                    }}\r\n                >\r\n                    {[...componentsCredentials].map((componentCredential) => (\r\n                        <div key={componentCredential.name}>\r\n                            <ListItemButton\r\n                                onClick={() => onCredentialSelected(componentCredential)}\r\n                                sx={{ p: 0, borderRadius: `${customization.borderRadius}px` }}\r\n                            >\r\n                                <ListItem alignItems='center'>\r\n                                    <ListItemAvatar>\r\n                                        <div\r\n                                            style={{\r\n                                                width: 50,\r\n                                                height: 50,\r\n                                                borderRadius: '50%',\r\n                                                backgroundColor: 'white'\r\n                                            }}\r\n                                        >\r\n                                            <img\r\n                                                style={{\r\n                                                    width: '100%',\r\n                                                    height: '100%',\r\n                                                    padding: 7,\r\n                                                    borderRadius: '50%',\r\n                                                    objectFit: 'contain'\r\n                                                }}\r\n                                                alt={componentCredential.name}\r\n                                                src={`${baseURL}/api/v1/components-credentials-icon/${componentCredential.name}`}\r\n                                            />\r\n                                        </div>\r\n                                    </ListItemAvatar>\r\n                                    <ListItemText sx={{ ml: 1 }} primary={componentCredential.label} />\r\n                                </ListItem>\r\n                            </ListItemButton>\r\n                        </div>\r\n                    ))}\r\n                </List>\r\n            </DialogContent>\r\n        </Dialog>\r\n    ) : null\r\n\r\n    return createPortal(component, portalElement)\r\n}\r\n\r\nCredentialListDialog.propTypes = {\r\n    show: PropTypes.bool,\r\n    dialogProps: PropTypes.object,\r\n    onCancel: PropTypes.func,\r\n    onCredentialSelected: PropTypes.func\r\n}\r\n\r\nexport default CredentialListDialog\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}